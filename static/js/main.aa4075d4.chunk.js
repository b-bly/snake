(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{10:function(e,t,a){e.exports=a(19)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),i=a.n(o),l=(a(16),a(3)),s=a(4),c=a(7),u=a(6),f=(a(17),a(1)),p=a(5),d=(a(18),{position:"fixed",zIndex:"10",left:"0",top:"0",width:"100%",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.4)"}),m={position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"},h={zIndex:"1",display:"flex",flexFlow:"column nowrap",textAlign:"center",border:"7px solid #448EE4",borderRadius:"20px",boxShadow:"inset 0 -80px black, 0px 0px 20px rgb(112, 112, 112)",backgroundColor:"black",color:"white",padding:"20px",maxWidth:"750px",fontSize:"30px"},g=function(e){return r.a.createElement("div",{style:d},r.a.createElement("div",{style:m},r.a.createElement("div",{style:h},r.a.createElement("div",null,e.message),r.a.createElement("div",null,!0===e.playAgainButton&&r.a.createElement("button",{className:"btn btn-success message-margin",onClick:e.playAgain},"Play Again")))))},y=parseInt(32),v=parseInt(32),b=v+4,k=y+4,x=Array(20).fill("").map((function(e,t,a){return t*y+0+2})),E=Array(20).fill("").map((function(e,t,a){return t*v+0+2})),w=(Array(20).fill("").map((function(e,t,a){return t*y+0})),Array(20).fill("").map((function(e,t,a){return t*v+0})),Array(20).fill("").map((function(e,t){return t})),Array(20).fill("").map((function(e,t){return 100*t}))),S="rgb(  0,   0,   0)",O="rgb(  0, 255,   0)",T="UP",I="RIGHT",j={UP:"DOWN",DOWN:T,LEFT:I,RIGHT:"LEFT"},L=function(e){var t={backgroundColor:e.backgroundColor,border:e.border?"2px solid gray":"",width:y-4,height:v-4,zIndex:e.zIndex,position:"absolute",top:e.top,left:e.left};return r.a.createElement("div",{style:t})},A=function(){var e=Array(20).fill("").map((function(e,t,a){return a.map((function(e,a){return r.a.createElement(L,{key:a.toString(),backgroundColor:S,top:t*v+0,left:a*y+0,zIndex:"0",border:!1})}))}));return r.a.createElement("div",null,e)},M=function(e){var t=e.top,a=e.left,o=E[Math.floor(t/100)]+b*(t%100)/100,i=x[Math.floor(a/100)]+k*(a%100)/100;return o<0&&console.log("$$$ less than y offset @@@"),r.a.createElement(n.Fragment,null,r.a.createElement(L,{backgroundColor:"rgb(255,   0,   0)",zIndex:"2",top:o,left:i,border:!1}))},C=function(e){var t=e.top,a=e.left,o=E[Math.floor(t/100)]+b*(t%100)/100,i=x[Math.floor(a/100)]+k*(a%100)/100;return r.a.createElement(n.Fragment,null,r.a.createElement(L,{backgroundColor:O,zIndex:"1",top:o,left:i,border:!1}))},P=function(e){var t={backgroundColor:e.backgroundColor,border:e.border?"2px solid gray":"",width:y-4,height:v-4};return r.a.createElement("div",{style:t})},F=function(){return{playerState:[{top:w[0],left:w[5],direction:I,bodyIndex:0,turning:[]},{top:w[0],left:w[4],direction:I,bodyIndex:1,turning:[]}],fruit:[{top:w[1],left:w[1],timeStamp:0}],playerSpeed:30,paused:!1,score:0,snakeLength:2,fruitEatenThisLevel:1,fruitValue:1,message:!1,playAgainButton:!1}},D=a(2),N={display:"flex",flexDirection:"column",alignItems:"flex-start",flex:"0 1 auto",marginLeft:"10px",padding:"5px",margin:"auto 5px",border:"4px solid white",borderRadius:"4px",minWidth:"135px"},W={display:"flex",justifyContent:"center",flexFlow:"row reverse-wrap",width:"100%"},z=Object(D.a)(Object(D.a)({},W),{},{alignItems:"center"}),B={marginTop:"50px",position:"relative",width:"640px",height:"640px",border:"2px solid gray"},G={color:"white",fontSize:"20px",margin:"5px 0"},V=Object(D.a)(Object(D.a)({},G),{},{marginLeft:"10px"}),R=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).start=function(){e.playerInterval=setInterval((function(){e.updatePlayerPosition()}),125);var t=1e4*Math.random();e.fruitTimeout=setTimeout((function(){e.placeFruit()}),t)},e.placeFruit=function(){Object(p.a)(e);var t=e.checkOccupiedSquares();new Date;t.timeStamp=Date.UTC(),e.setState({fruit:[].concat(Object(f.a)(e.state.fruit),[t])})},e.checkOccupiedSquares=function(){for(var t=w[Math.floor(Math.random()*w.length)],a=w[Math.floor(Math.random()*w.length)],n=[].concat(Object(f.a)(e.state.playerState),Object(f.a)(e.state.fruit)),r=0;r<n.length;r++){var o=n[r],i=n[r];if(t===o&&a===i)return e.checkOccupiedSquares()}return{top:t,left:a}},e.updatePlayerPosition=function(){var t=e.state.playerSpeed,a=Object(f.a)(e.state.playerState).map((function(a,n){if(a.turning.length>0){console.log("turning");var r=a.direction,o=a.turning[0],i=o.threshold,l=o.direction,s=a,c=s.top,u=s.left;switch(r){case T:if(c-t<=i){console.log("up"),a.direction=l;var f=i+t-c;(a=e.movePlayer(a,f)).top=i,a.turning.shift()}else a=e.movePlayer(a,t);break;case I:if(u>=i-t){console.log("right"),a.direction=l;var p=u-(i-t);a.left=i,(a=e.movePlayer(a,p)).turning.shift()}else a=e.movePlayer(a,t);break;case"DOWN":if(c+t>=i){console.log("down"),a.direction=l;var d=c-(i-t);a.top=i,(a=e.movePlayer(a,d)).turning.shift()}else a=e.movePlayer(a,t);break;case"LEFT":if(u-t<=i){console.log("left"),a.direction=l;var m=i+t-u;a.left=i,(a=e.movePlayer(a,m)).turning.shift()}else a=e.movePlayer(a,t)}}else a=e.movePlayer(a,t);return a}));a.map((function(e){e.direction;return e}));e.checkForFruit(a),e.state.fruitEatenThisLevel>=2?e.advanceLevel():e.setState({playerState:a})},e.movePlayer=function(t,a){var n=t.direction,r=t.top,o=t.left;switch(n){case T:if(r-a<0)return t.top=0,e.endGame(),t;break;case"DOWN":if(r+a>1900)return t.top=1900,e.endGame(),t;break;case"LEFT":if(o-a<0)return t.left=0,e.endGame(),t;break;case I:if(o+a>1900)return t.left=1900,e.endGame(),t}switch(n){case T:t.top-=a;break;case I:t.left+=a;break;case"DOWN":t.top+=a;break;case"LEFT":t.left-=a}return t},e.advanceLevel=function(){for(var t=[],a=e.state,n=a.snakeLength,r=a.playerSpeed,o=0;o<=e.state.snakeLength;o++){var i={top:w[0],left:w[o],direction:I,bodyIndex:2,turning:[]};t.unshift(i)}e.pause(),e.setState({playerState:t,message:!0,paused:!1,snakeLength:n+1,playerSpeed:r+10,fruitEatenThisLevel:0}),e.showMessage("Ready, go!",!1),setTimeout((function(){e.clearMessage(),e.start()}),1e3)},e.endGame=function(){window.clearInterval(e.playerInterval),window.clearTimeout(e.fruitTimeout),e.showMessage("Game Over",!0)},e.checkForFruit=function(t){var a=e.state.fruitEatenThisLevel,n=e.state.fruit.filter((function(n,r){var o=Math.floor(t[0].top/100),i=Math.floor(t[0].left/100),l=n.top/100,s=n.left/100;if(o===l&&i===s){a++;var c=1e4*Math.random();return e.fruitTimeout=setTimeout((function(){e.placeFruit()}),c),!1}return!0}));a>e.state.fruitEatenThisLevel&&e.setState({score:e.state.score+e.state.fruitValue,fruit:n,fruitEatenThisLevel:a,fruitValue:2*e.state.fruitValue})},e.handlePlayerMovement=function(t){var a=e.state.playerState,n=a[0].turning.length>0,r=Object(f.a)(e.state.playerState).map((function(r,o){n&&r.turning.pop();var i=e.getTurnThreshold(a[0].direction,a[0]),l=Object(f.a)(r.turning);return l.push({direction:t,threshold:i}),r.turning=l,r}));e.setState({playerState:r})},e.getTurnThreshold=function(e,t){var a;switch(e){case T:a=t.top-t.top%100;break;case"DOWN":a=t.top-t.top%100+100;break;case"LEFT":a=t.left-t.left%100;break;case I:a=t.left-t.left%100+100}return a},e.pause=function(){!0===e.state.paused?(e.start(),e.setState({paused:!1})):(window.clearInterval(e.playerInterval),e.setState({paused:!0}))},e.handleKeyDown=function(t){if(80===t.keyCode)e.pause();else{var a;switch(t.keyCode){case 37:a="LEFT";break;case 38:a=T;break;case 39:a=I;break;case 40:a="DOWN";break;default:return}var n=e.state.playerState[0].direction;n!==a&&j[n]!==a&&e.handlePlayerMovement(a)}},e.showMessage=function(t,a){e.setState({message:t,playAgainButton:a})},e.clearMessage=function(){e.setState({message:null,playAgainButton:!1})},e.playAgain=function(){e.setState(F(),(function(){e.start()}))},e.state=F(),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.start(),window.onkeydown=this.handleKeyDown}},{key:"componentDidUpdate",value:function(){!0===this.props.start&&(this.start(),console.log("component did update!"))}},{key:"render",value:function(){var e=this.state.playerState.map((function(e,t){return r.a.createElement(M,{key:t.toString(),top:e.top,left:e.left})})),t=this.state.fruit.map((function(e,t){return r.a.createElement(C,{key:t.toString(),top:e.top,left:e.left})}));return r.a.createElement("div",null,this.state.message&&r.a.createElement(g,{message:this.state.message,playAgainButton:this.state.playAgainButton,playAgain:this.playAgain.bind(this)}),r.a.createElement("div",{className:"row",style:W},r.a.createElement("div",{className:"board",style:B},e,t,r.a.createElement(A,null)),r.a.createElement("div",{className:"score",style:N},r.a.createElement("h2",{style:G},"Score: ",this.state.score),r.a.createElement("div",{style:z},r.a.createElement(P,{backgroundColor:O}),r.a.createElement("h2",{style:V},this.state.fruitValue," ",this.state.fruitValue>1?r.a.createElement("span",null,"points"):r.a.createElement("span",null,"point"))))))}}]),a}(n.Component),U=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.call(this)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App",style:{backgroundColor:"black",height:"100vh"}},r.a.createElement("h1",{style:{color:"white",margin:"0"}},"Snake"),r.a.createElement(R,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.aa4075d4.chunk.js.map